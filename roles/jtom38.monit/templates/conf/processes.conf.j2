# This file was generated by Ansible.
# Any changes made to this file will be lost.

{% for i in monit_processes %}

    {% if i.pidfile != '' %}
check process {{ i.name }} with pidfile {{ i.pidfile }}
    {% elif i.matching != '' %}
check process {{ i.name }} with matching {{ i.matching }}
    {% endif %}
    start = "{{ i.start }}" with timeout {{ i.timeout }}
    stop = "{{ i.stop }}"

    {% for w in i.when %}
        {% if w.alert == true %}
    if {{ w.type }} {{ w.usage }} for {{ w.cycles }} cycles then alert
    if changed {{ w.type }} THEN alert
        {% elif w.exec != '' %}
    if {{ w.type }} {{ w.usage }} for {{ w.cycles }} cycles then exec {{ w.exec }}
    else if succeeded then exec {{ w.exec }}
        {% endif %}
    {% endfor %}

{% endfor %}
